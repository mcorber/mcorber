var M=(r,i,t)=>{if(!i.has(r))throw TypeError("Cannot "+t)};var s=(r,i,t)=>(M(r,i,"read from private field"),t?t.call(r):i.get(r)),y=(r,i,t)=>{if(i.has(r))throw TypeError("Cannot add the same private member more than once");i instanceof WeakSet?i.add(r):i.set(r,t)},m=(r,i,t,n)=>(M(r,i,"write to private field"),n?n.call(r,t):i.set(r,t),t);(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const e of o.addedNodes)e.tagName==="LINK"&&e.rel==="modulepreload"&&n(e)}).observe(document,{childList:!0,subtree:!0});function t(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(a){if(a.ep)return;a.ep=!0;const o=t(a);fetch(a.href,o)}})();var $=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function j(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var q={exports:{}};/*!
 * Toastify js 1.12.0
 * https://github.com/apvarun/toastify-js
 * @license MIT licensed
 *
 * Copyright (C) 2018 Varun A P
 */(function(r){(function(i,t){r.exports?r.exports=t():i.Toastify=t()})($,function(i){var t=function(e){return new t.lib.init(e)},n="1.12.0";t.defaults={oldestFirst:!0,text:"Toastify is awesome!",node:void 0,duration:3e3,selector:void 0,callback:function(){},destination:void 0,newWindow:!1,close:!1,gravity:"toastify-top",positionLeft:!1,position:"",backgroundColor:"",avatar:"",className:"",stopOnFocus:!0,onClick:function(){},offset:{x:0,y:0},escapeMarkup:!0,ariaLive:"polite",style:{background:""}},t.lib=t.prototype={toastify:n,constructor:t,init:function(e){return e||(e={}),this.options={},this.toastElement=null,this.options.text=e.text||t.defaults.text,this.options.node=e.node||t.defaults.node,this.options.duration=e.duration===0?0:e.duration||t.defaults.duration,this.options.selector=e.selector||t.defaults.selector,this.options.callback=e.callback||t.defaults.callback,this.options.destination=e.destination||t.defaults.destination,this.options.newWindow=e.newWindow||t.defaults.newWindow,this.options.close=e.close||t.defaults.close,this.options.gravity=e.gravity==="bottom"?"toastify-bottom":t.defaults.gravity,this.options.positionLeft=e.positionLeft||t.defaults.positionLeft,this.options.position=e.position||t.defaults.position,this.options.backgroundColor=e.backgroundColor||t.defaults.backgroundColor,this.options.avatar=e.avatar||t.defaults.avatar,this.options.className=e.className||t.defaults.className,this.options.stopOnFocus=e.stopOnFocus===void 0?t.defaults.stopOnFocus:e.stopOnFocus,this.options.onClick=e.onClick||t.defaults.onClick,this.options.offset=e.offset||t.defaults.offset,this.options.escapeMarkup=e.escapeMarkup!==void 0?e.escapeMarkup:t.defaults.escapeMarkup,this.options.ariaLive=e.ariaLive||t.defaults.ariaLive,this.options.style=e.style||t.defaults.style,e.backgroundColor&&(this.options.style.background=e.backgroundColor),this},buildToast:function(){if(!this.options)throw"Toastify is not initialized";var e=document.createElement("div");e.className="toastify on "+this.options.className,this.options.position?e.className+=" toastify-"+this.options.position:this.options.positionLeft===!0?(e.className+=" toastify-left",console.warn("Property `positionLeft` will be depreciated in further versions. Please use `position` instead.")):e.className+=" toastify-right",e.className+=" "+this.options.gravity,this.options.backgroundColor&&console.warn('DEPRECATION NOTICE: "backgroundColor" is being deprecated. Please use the "style.background" property.');for(var u in this.options.style)e.style[u]=this.options.style[u];if(this.options.ariaLive&&e.setAttribute("aria-live",this.options.ariaLive),this.options.node&&this.options.node.nodeType===Node.ELEMENT_NODE)e.appendChild(this.options.node);else if(this.options.escapeMarkup?e.innerText=this.options.text:e.innerHTML=this.options.text,this.options.avatar!==""){var h=document.createElement("img");h.src=this.options.avatar,h.className="toastify-avatar",this.options.position=="left"||this.options.positionLeft===!0?e.appendChild(h):e.insertAdjacentElement("afterbegin",h)}if(this.options.close===!0){var f=document.createElement("button");f.type="button",f.setAttribute("aria-label","Close"),f.className="toast-close",f.innerHTML="&#10006;",f.addEventListener("click",(function(I){I.stopPropagation(),this.removeElement(this.toastElement),window.clearTimeout(this.toastElement.timeOutValue)}).bind(this));var c=window.innerWidth>0?window.innerWidth:screen.width;(this.options.position=="left"||this.options.positionLeft===!0)&&c>360?e.insertAdjacentElement("afterbegin",f):e.appendChild(f)}if(this.options.stopOnFocus&&this.options.duration>0){var b=this;e.addEventListener("mouseover",function(I){window.clearTimeout(e.timeOutValue)}),e.addEventListener("mouseleave",function(){e.timeOutValue=window.setTimeout(function(){b.removeElement(e)},b.options.duration)})}if(typeof this.options.destination<"u"&&e.addEventListener("click",(function(I){I.stopPropagation(),this.options.newWindow===!0?window.open(this.options.destination,"_blank"):window.location=this.options.destination}).bind(this)),typeof this.options.onClick=="function"&&typeof this.options.destination>"u"&&e.addEventListener("click",(function(I){I.stopPropagation(),this.options.onClick()}).bind(this)),typeof this.options.offset=="object"){var k=a("x",this.options),S=a("y",this.options),B=this.options.position=="left"?k:"-"+k,H=this.options.gravity=="toastify-top"?S:"-"+S;e.style.transform="translate("+B+","+H+")"}return e},showToast:function(){this.toastElement=this.buildToast();var e;if(typeof this.options.selector=="string"?e=document.getElementById(this.options.selector):this.options.selector instanceof HTMLElement||typeof ShadowRoot<"u"&&this.options.selector instanceof ShadowRoot?e=this.options.selector:e=document.body,!e)throw"Root element is not defined";var u=t.defaults.oldestFirst?e.firstChild:e.lastChild;return e.insertBefore(this.toastElement,u),t.reposition(),this.options.duration>0&&(this.toastElement.timeOutValue=window.setTimeout((function(){this.removeElement(this.toastElement)}).bind(this),this.options.duration)),this},hideToast:function(){this.toastElement.timeOutValue&&clearTimeout(this.toastElement.timeOutValue),this.removeElement(this.toastElement)},removeElement:function(e){e.className=e.className.replace(" on",""),window.setTimeout((function(){this.options.node&&this.options.node.parentNode&&this.options.node.parentNode.removeChild(this.options.node),e.parentNode&&e.parentNode.removeChild(e),this.options.callback.call(e),t.reposition()}).bind(this),400)}},t.reposition=function(){for(var e={top:15,bottom:15},u={top:15,bottom:15},h={top:15,bottom:15},f=document.getElementsByClassName("toastify"),c,b=0;b<f.length;b++){o(f[b],"toastify-top")===!0?c="toastify-top":c="toastify-bottom";var k=f[b].offsetHeight;c=c.substr(9,c.length-1);var S=15,B=window.innerWidth>0?window.innerWidth:screen.width;B<=360?(f[b].style[c]=h[c]+"px",h[c]+=k+S):o(f[b],"toastify-left")===!0?(f[b].style[c]=e[c]+"px",e[c]+=k+S):(f[b].style[c]=u[c]+"px",u[c]+=k+S)}return this};function a(e,u){return u.offset[e]?isNaN(u.offset[e])?u.offset[e]:u.offset[e]+"px":"0px"}function o(e,u){return!e||typeof u!="string"?!1:!!(e.className&&e.className.trim().split(/\s+/gi).indexOf(u)>-1)}return t.lib.init.prototype=t.lib,t})})(q);var W=q.exports;const x=j(W);var F,v;class D{constructor(i="marcador"){y(this,F,void 0);y(this,v,[{name:"X",puntos:0},{name:"O",puntos:0}]);m(this,F,i),this.imprimir()}addPuntos(i){let t=s(this,v).find(n=>n.name===i);t.puntos++,this.imprimir()}imprimir(){let i=document.getElementById(s(this,F)),t=document.createElement("ul");s(this,v).forEach(n=>{let a=document.createElement("li");a.textContent=`Jugador ${n.name} tiene ${n.puntos} puntos`,t.append(a)}),i.innerHTML="",i.append(t)}getFirstPlayerPoints(){return s(this,v)[0].puntos}getSecondPlayerPoints(){return s(this,v)[1].puntos}getFirstPlayerName(){return s(this,v)[0].name}getSecondPlayerName(){return s(this,v)[1].name}}F=new WeakMap,v=new WeakMap;var p,l,g,w,d,T,O,C,P;class V{constructor(i=3,t=!1,n){y(this,p,void 0);y(this,l,void 0);y(this,g,void 0);y(this,w,void 0);y(this,d,void 0);y(this,T,void 0);y(this,O,void 0);y(this,C,!1);y(this,P,[]);let a=document.getElementById("tablero");a.dataset.round=0,m(this,p,new Array),m(this,l,i),m(this,T,n),m(this,O,t);for(let o=0;o<s(this,l);o++){s(this,p)[o]=new Array;for(let e=0;e<s(this,l);e++)s(this,p)[o][e]=null}m(this,g,"X"),m(this,d,new D)}imprimirRondas(){let i=document.getElementById(s(this,w)),t=parseInt(i.dataset.round),n=document.querySelector(".roundsContainer h3");n.textContent=`Ronda : ${parseInt(t+1)} / ${s(this,T)}`}imprimir(i="tablero"){m(this,w,i);let t=document.getElementById(s(this,w));t.innerHTML="",this.imprimirRondas();for(let n=0;n<s(this,l);n++)for(let a=0;a<s(this,l);a++){let o=document.createElement("div");o.dataset.fila=n,o.dataset.columna=a,o.dataset.libre="",s(this,p)[n][a]&&(o.textContent=s(this,p)[n][a],o.dataset.libre=s(this,p)[n][a]),t.appendChild(o),this.addEventClick(o)}t.style.gridTemplateColumns=`repeat(${s(this,l)}, 1fr)`}isFree(i,t){return s(this,p)[i][t]===null}setCasilla(i,t,n){return this.isFree(i,t)?(s(this,p)[i][t]=n,!0):!1}getCasilla(i,t){return s(this,p)[i][t]}toogleTurno(){if(s(this,C))return!1;if(s(this,g)==="X"){if(m(this,g,"O"),s(this,O)){let i=this.getCasillaFreeRandom();if(this.setCasilla(i.i,i.j,"O"),this.imprimir(),this.comprobarResultados(),s(this,C))return!1;this.toogleTurno()}}else m(this,g,"X")}comprobarResultados(){let i,t,n=!1;for(i=0;i<s(this,l)&&!n;i++){let o=0;for(t=0;t<s(this,l);t++)t!==0&&this.getCasilla(i,t)===this.getCasilla(i,t-1)&&this.getCasilla(i,t)!==null&&o++;o===s(this,l)-1&&(console.log("Linea"),n=!0)}for(t=0;t<s(this,l)&&!n;t++){let o=0;for(i=0;i<s(this,l);i++)i!==0&&this.getCasilla(i,t)===this.getCasilla(i-1,t)&&this.getCasilla(i,t)!==null&&o++;o===s(this,l)-1&&(console.log("Columna"),n=!0)}let a=0;for(let o=0;o<s(this,l);o++)o!==0&&this.getCasilla(o,o)===this.getCasilla(o-1,o-1)&&this.getCasilla(o,o)!==null&&a++;a===s(this,l)-1&&(console.log("Diagonal de izq a derecha"),n=!0),a=0;for(let o=s(this,l)-1;o>=0;o--)if(o!==s(this,l)-1){let e=s(this,l)-1-o;this.getCasilla(o,e)===this.getCasilla(o+1,e-1)&&this.getCasilla(o,e)!==null&&a++}if(a===s(this,l)-1&&(console.log("Diagonal de derecha a izquierda"),n=!0),n){m(this,C,!0),x({text:`Ha ganado el jugador ${s(this,g)}`,newWindow:!0,close:!0,gravity:"top",position:"center",stopOnFocus:!0,style:{background:"blue"},onClick:function(){}}).showToast(),document.querySelectorAll('div[data-libre=""]').forEach(h=>{h.dataset.libre="-"}),s(this,d).addPuntos(s(this,g)),document.querySelector(".clearGame").classList.toggle("show");let e=document.getElementById(s(this,w)),u=parseInt(e.dataset.round);if(s(this,T)-1===u){e.classList.toggle("hide");let h=document.getElementById("ganador");h.classList.toggle("show"),document.getElementById("actions").classList.toggle("show"),h.querySelector("h1").textContent="Fin del juego",document.querySelector(".clearGameButton").classList.toggle("hide"),document.querySelector(".clearGame").classList.toggle("show"),s(this,d).getFirstPlayerPoints()>s(this,d).getSecondPlayerPoints()?h.querySelector("h3").textContent=`Ha ganado ${s(this,d).getFirstPlayerName()} con ${s(this,d).getFirstPlayerPoints()} puntos`:s(this,d).getFirstPlayerPoints()<s(this,d).getSecondPlayerPoints()?h.querySelector("h3").textContent=`Ha ganado ${s(this,d).getSecondPlayerName()} con ${s(this,d).getSecondPlayerPoints()} puntos`:h.querySelector("h3").textContent="EMPATE"}}else if(this.isFull()&&(x({text:"Han sido tablas",newWindow:!0,close:!0,gravity:"top",position:"center",stopOnFocus:!0,style:{background:"blue"},onClick:function(){}}).showToast(),document.querySelector(".clearGameButton").classList.toggle("hide"),document.querySelector(".clearGame").classList.toggle("show"),m(this,C,!0),s(this,T)-1===currentRound)){console.log("Fin del juego"),document.querySelector(".clearGame").classList.toggle("show");debugger;s(this,d).getFirstPlayerPoints()>s(this,d).getSecondPlayerPoints()?console.log(`Ha ganado ${s(this,d).getFirstPlayerName()} con ${s(this,d).getFirstPlayerPoints()} puntos`):s(this,d).getFirstPlayerPoints()<s(this,d).getSecondPlayerPoints()?console.log(`Ha ganado ${s(this,d).getSecondPlayerName()} con ${s(this,d).getSecondPlayerPoints()} puntos`):console.log("Empate")}}isFull(){return!s(this,p).some(i=>i.some(t=>t===null))}saveAction(i,t,n){let a={fila:i,columna:t,turno:n};s(this,P).push(a)}clearActions(){let i=document.getElementById("actions");i.innerHTML="",s(this,P).splice(0,s(this,P).length),this.showAction()}showAction(){let i=document.getElementById("actions");i.innerHTML="",s(this,P).map(t=>{let n=document.createElement("li");n.textContent=`El jugador ${t.turno} ha movido ficha en fila: ${t.fila}, columna: ${t.columna}`,i.appendChild(n)})}addEventClick(i){i.addEventListener("click",t=>{let n=t.currentTarget;n.dataset.libre===""&&(n.textContent=s(this,g),this.setCasilla(n.dataset.fila,n.dataset.columna,s(this,g)),this.saveAction(n.dataset.fila,n.dataset.columna,s(this,g)),this.showAction(),n.dataset.libre=s(this,g),this.comprobarResultados(),this.toogleTurno())}),i.addEventListener("mouseover",t=>{t.currentTarget.dataset.libre===""&&(t.currentTarget.textContent=s(this,g))}),i.addEventListener("mouseleave",t=>{t.currentTarget.dataset.libre===""&&(t.currentTarget.textContent="")})}get dimension(){return s(this,l)}get elementID(){return s(this,w)}limpiar(){let i=document.getElementById(s(this,w)),t=parseInt(i.dataset.round);i.dataset.round=t+parseInt(1),m(this,p,s(this,p).map(n=>n.map(a=>null))),m(this,C,!1),this.imprimir(),this.imprimirRondas(),this.clearActions(),document.querySelector(".clearGame").classList.toggle("show")}getCasillaFreeRandom(){let i,t;do i=Math.floor(Math.random()*s(this,l)),t=Math.floor(Math.random()*s(this,l));while(!this.isFree(i,t));return{i,j:t}}}p=new WeakMap,l=new WeakMap,g=new WeakMap,w=new WeakMap,d=new WeakMap,T=new WeakMap,O=new WeakMap,C=new WeakMap,P=new WeakMap;const z=document.getElementById("createTable"),L=document.getElementById("dimension"),N=document.getElementById("rounds"),X=document.getElementById("resetGame");document.querySelector(".clearGame");const A=document.querySelector(".roundsContainer"),_=document.querySelectorAll(".clearGameButton"),R=document.querySelector(".preGame"),G=document.querySelector(".inGame"),J=document.getElementById("actions"),K=document.getElementById("ganador");let E;z.addEventListener("click",r=>{if(!L.value||L.value<1)return x({text:"Debe indicar una dimensión válida",duration:3e3,newWindow:!1,close:!0,gravity:"top",position:"right",stopOnFocus:!0,style:{background:"red"},onClick:function(){}}).showToast(),L.classList.add("error"),L.focus(),!1;if(!N.value||N.value<1)return x({text:"Debe indicar una cantidad de rondas válida",duration:3e3,newWindow:!1,close:!0,gravity:"top",position:"right",stopOnFocus:!0,style:{background:"red"},onClick:function(){}}).showToast(),N.classList.add("error"),N.focus(),!1;let i=parseInt(N.value),t=document.getElementById("machine");E=new V(parseInt(L.value),t.checked,i),E.imprimir("tablero"),A.classList.toggle("show"),R.classList.toggle("hide"),G.classList.toggle("hide"),J.classList.toggle("show")});L.addEventListener("keydown",()=>{L.classList.remove("error")});for(let r of _)r.addEventListener("click",()=>{E.limpiar()});X.addEventListener("click",r=>{document.getElementById(E.elementID).innerHTML="",document.getElementById(E.elementID).dataset.round=0,document.getElementById("marcador").innerHTML="",E=null,R.classList.toggle("hide"),A.classList.toggle("show"),G.classList.toggle("hide"),K.classList.toggle("show"),document.querySelector(".clearGameButton").classList.toggle("hide");let i=document.querySelector(".clearGame").classList;for(let t=0;t<i.length;t++)i[t]==="show"&&document.querySelector(".clearGame").classList.toggle("show");E.clearActions(),L.innerHTML="",N.innerHTML="",L.focus()});
